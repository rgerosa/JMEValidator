{ 
  "activeTrainings" : ["phiTraining", "recoilTraining"],
  "activeReweightings" : ["flattenpT"],
  "inputFile": "file:/storage/a/friese/puppet/DYJetsToLL_M-50_TuneCUETP8M1_13TeV-amcatnloFXFX-pythia8_Asympt50ns_MCRUN2_74_V9A_forMVATraining.root",
  "Folder" : "PUPPET/t",
  "flattenpT" :
  {
  	  "desc" : "Weight to get flat pT distribution",
  	  "name" : "flatPtWeight",
  	  "flattenVariable" : "Boson_Pt",
  	  "weight" : "Boson_daughter==13",
  	  "eventsPerBin" : 100,
  	  "type" : 1
  },
  "phiTraining":
  {
  	  "mode" : 1,
  	  "friends" : [],
  	  "desc" : "First training on phi",
  	  "apply_MVA_to" : "recoilPFPuppiMet",
  	  "weight" : "Boson_daughter==13",
  	  "name" : "PhiCorrectedRecoil",
  	  "folder" : "PUPPET/t",
  	  "minEvents" : 250,
  	  "shrinkage" : 0.05,
  	  "minCutSignificance" : 2.0,
  	  "nTrees" : 1000,
  	  "weightfilename" : "PhiCorection_PUPPI.root",
  	  "targetVariables" : ["(Boson_Phi-recoilPFPuppiMet_Phi+TMath::Pi()) - 2.*TMath::Pi()*((Boson_Phi-recoilPFPuppiMet_Phi) > 0)"],
  	  "trainingVariables" : 
  	  [	
		"recoilPFMet_Pt",
		"recoilPFMet_Phi",
		"recoilPFMet_sumEt",
		"recoilPFCHSMet_Pt",
		"recoilPFCHSMet_Phi",
		"recoilPFCHSMet_sumEt",
		"recoilPFPuppiMet_Pt",
		"recoilPFPuppiMet_Phi",
		"recoilPFPuppiMet_sumEt",
                "recoilPFPuppiMet_ChargedPU_Pt",
		"recoilPFPuppiMet_ChargedPU_Phi",
		"recoilPFPuppiMet_ChargedPU_sumEt",
		"recoilPFPuppiMet_ChargedPV_Pt",
		"recoilPFPuppiMet_ChargedPV_Phi",
		"recoilPFPuppiMet_ChargedPV_sumEt",
		"recoilPFPuppiMet_NeutralPV_Pt",
		"recoilPFPuppiMet_NeutralPV_Phi",
		"recoilPFPuppiMet_NeutralPV_sumEt",
		"recoilPFPuppiMet_NeutralPU_Pt",
		"recoilPFPuppiMet_NeutralPU_Phi",
		"recoilPFPuppiMet_NeutralPU_sumEt",
		"LeadingJet_Phi",
		"LeadingJet_Eta",
		"LeadingJet_Pt",
		"TrailingJet_Phi",
		"TrailingJet_Eta",
		"TrailingJet_Pt",
		"NVertex",
		"NCleanedJets"]
  },
  "recoilTraining":
  {
  	  "mode" : 2,
  	  "friends" : ["PhiCorrectedRecoil", "flatPtWeight"],
  	  "desc" : "Second training on Recoil",
  	  "apply_MVA_to" : "PhiCorrectedRecoil",
  	  "weight" : "(Boson_daughter==13)*(Boson_Pt>5)*(flatPtWeight*(flatPtWeight<10)+10*(flatPtWeight>=10))",
  	  "name" : "LongZCorrectedRecoil",
  	  "folder" : "Flat",
  	  "minEvents" : 250,
  	  "shrinkage" : 0.05,
  	  "minCutSignificance" : 3.0,
  	  "nTrees" : 1000,
  	  "weightfilename" : "RecoilCorrection_PUPPI.root",
  	  "targetVariable" : ["-Boson_Pt/PhiCorrectedRecoil_LongZ"],
  	  "trainingVariables" : 
  	  [	
		"recoilPFMet_Pt",
		"recoilPFMet_Phi",
		"recoilPFMet_sumEt",
		"recoilPFCHSMet_Pt",
		"recoilPFCHSMet_Phi",
		"recoilPFCHSMet_sumEt",
		"recoilPFPuppiMet_Pt",
		"recoilPFPuppiMet_Phi",
		"recoilPFPuppiMet_sumEt",
                "PhiCorrectedRecoil_Phi",
		"recoilPFPuppiMet_ChargedPU_Pt",
		"recoilPFPuppiMet_ChargedPU_Phi",
		"recoilPFPuppiMet_ChargedPU_sumEt",
		"recoilPFPuppiMet_ChargedPV_Pt",
		"recoilPFPuppiMet_ChargedPV_Phi",
		"recoilPFPuppiMet_ChargedPV_sumEt",
		"recoilPFPuppiMet_NeutralPV_Pt",
		"recoilPFPuppiMet_NeutralPV_Phi",
		"recoilPFPuppiMet_NeutralPV_sumEt",
		"recoilPFPuppiMet_NeutralPU_Pt",
		"recoilPFPuppiMet_NeutralPU_Phi",
		"recoilPFPuppiMet_NeutralPU_sumEt",
		"LeadingJet_Phi",
		"LeadingJet_Eta",
		"LeadingJet_Pt",
		"TrailingJet_Phi",
		"TrailingJet_Eta",
		"TrailingJet_Pt",
		"NVertex",
		"NCleanedJets"]
  },
  "Cov1Training":
  {
  	  "mode" : 3,
  	  "friends" : ["RecoilCor"],
  	  "desc" : "Third training CovU1",
  	  "apply_MVA_to" : "RecoilCor",
  	  "weight" : "z_pT/RecoilCor_U<5",
  	  "name" : "CovU1",
  	  "folder" : "Flat",
  	  "minEvents" : 250,
  	  "shrinkage" : 0.2,
  	  "minCutSignificance" : 3.0,
  	  "nTrees" : 1000,
  	  "weightfilename" : "CovU1_13TeV.root",
  	  "targetVariable" : "abs(z_pT*cos(z_Phi-RecoilCor_UPhi)-RecoilCor_U)/RecoilCor_U*sqrt(TMath::Pi()/2.)",
  	  "trainingVariables" : 
  	  [ "particleFlow_U", 
    	"particleFlow_SumET", 
    	"particleFlow_UPhi",
    	"track_SumET", 
    	"track_U",
    	"track_UPhi",
    	"noPileUp_SumET",
    	"noPileUp_U", 
    	"noPileUp_UPhi",
    	"pileUp_SumET",
    	"pileUp_MET",
    	"pileUp_METPhi",
    	"pileUpCorrected_SumET",
    	"pileUpCorrected_U",
    	"pileUpCorrected_UPhi",
    	"jet1_pT",
    	"jet1_eta",
    	"jet1_Phi",
    	"jet2_pT",
    	"jet2_eta",
    	"jet2_Phi",
    	"nJets",
    	"nPV",
    	"numJetsPtGt30",
    	"RecoilCor_U",
    	"RecoilCor_UPhi"
  	  ]
  },
  "Cov2Training":
  {
  	  "mode" : 3,
  	  "friends" : ["RecoilCor"],
  	  "desc" : "Third training CovU1",
  	  "apply_MVA_to" : "RecoilCor",
  	  "weight" : "z_pT/RecoilCor_U<5",
  	  "name" : "CovU2",
  	  "folder" : "Flat",
  	  "minEvents" : 250,
  	  "shrinkage" : 0.2,
  	  "minCutSignificance" : 3.0,
  	  "nTrees" : 1000,
  	  "weightfilename" : "CovU2_13TeV.root",
  	  "targetVariable" : "abs(z_pT*sin(z_Phi-RecoilCor_UPhi))*sqrt(TMath::Pi()/2.)/RecoilCor_U",
  	  "trainingVariables" : 
  	  [ "particleFlow_U", 
    	"particleFlow_SumET", 
    	"particleFlow_UPhi",
    	"track_SumET", 
    	"track_U",
    	"track_UPhi",
    	"noPileUp_SumET",
    	"noPileUp_U", 
    	"noPileUp_UPhi",
    	"pileUp_SumET",
    	"pileUp_MET",
    	"pileUp_METPhi",
    	"pileUpCorrected_SumET",
    	"pileUpCorrected_U",
    	"pileUpCorrected_UPhi",
    	"jet1_pT",
    	"jet1_eta",
    	"jet1_Phi",
    	"jet2_pT",
    	"jet2_eta",
    	"jet2_Phi",
    	"nJets",
    	"nPV",
    	"numJetsPtGt30",
    	"RecoilCor_U",
    	"RecoilCor_UPhi"
  	  ]
  },
  "CovApply" : {
    	"mode" : -1,
    	"friends" : ["RecoilCor", "CovU1", "CovU2"],
    	"desc" : "Covariance Matrix",
    	"apply_MVA_to" : "RecoilCor",
    	"name" : "CovApply"
  }

}
